<!DOCTYPE html>
<html>
<head>
  <title>Videos</title>
</head>
<body>
  <h1>Videos</h1>
  <div id="videos"></div>

  <script>
    async function fetchVideos() {
      try {
        const response = await fetch('/api/videos');
        const videoList = await response.json();

        const container = document.getElementById('videos');
        container.innerHTML = '';

        if (videoList.length === 0) {
          container.textContent = 'No videos uploaded.';
          return;
        }

        videoList.forEach(filename => {
          const video = document.createElement('video');
          video.controls = true;
          video.src = `/api/videos/${encodeURIComponent(filename)}`;

          const label = document.createElement('p');
          label.textContent = filename;

          container.appendChild(label);
          container.appendChild(video);
        });

      } catch (error) {
        console.error('Error fetching videos:', error);
      }
    }

    fetchVideos();
  </script>
</body>
</html>
